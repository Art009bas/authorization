<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Авторизация</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .auth-container {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .input-field:focus {
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
        }
        .toggle-btn.active {
            background-color: #6366f1;
            color: white;
        }
        .social-btn {
            transition: all 0.3s ease;
        }
        .social-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .telegram-btn {
            background-color: #0088cc;
        }
        .yandex-btn {
            background-color: #FF0000;
        }
        .form-switch {
            transition: all 0.4s ease;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="auth-container rounded-xl shadow-2xl overflow-hidden w-full max-w-md">
        <div class="p-8 bg-white">
            <!-- Переключатель между входом и регистрацией -->
            <div class="flex rounded-lg p-1 bg-gray-100 mb-6">
                <button id="login-toggle" class="toggle-btn flex-1 py-2 rounded-lg font-medium active">Вход</button>
                <button id="register-toggle" class="toggle-btn flex-1 py-2 rounded-lg font-medium">Регистрация</button>
            </div>
            
            <!-- Форма входа -->
            <div id="login-form" class="form-switch">
                <h1 class="text-2xl font-bold text-gray-800 mb-6">Войдите в аккаунт</h1>
                
                <div class="space-y-4">
                    <div>
                        <label for="login-email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" id="login-email" class="w-full px-4 py-2 rounded-lg border border-gray-300 input-field focus:outline-none focus:border-indigo-500" placeholder="example@mail.com">
                    </div>
                    
                    <div>
                        <label for="login-password" class="block text-sm font-medium text-gray-700 mb-1">Пароль</label>
                        <div class="relative">
                            <input type="password" id="login-password" class="w-full px-4 py-2 rounded-lg border border-gray-300 input-field focus:outline-none focus:border-indigo-500" placeholder="••••••••">
                            <button class="absolute right-3 top-2 text-gray-400 hover:text-gray-600" onclick="togglePassword('login-password')">
                                <i class="far fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input type="checkbox" id="remember-me" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                            <label for="remember-me" class="ml-2 block text-sm text-gray-700">Запомнить меня</label>
                        </div>
                        <a href="#" class="text-sm text-indigo-600 hover:text-indigo-500">Забыли пароль?</a>
                    </div>
                    
                    <button id="login-button" class="w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700 transition duration-300">
                        Войти
                    </button>
                    <button id="demo-login-button" class="w-full mt-3 bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition duration-300">
                        Быстрый демо-вход
                    </button>
                </div>
                
                <div class="mt-6">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-white text-gray-500">Или войдите через</span>
                        </div>
                    </div>
                    
                    <div class="mt-4 grid grid-cols-2 gap-3">
                        <a href="#" class="social-btn telegram-btn text-white py-2 px-4 rounded-lg flex items-center justify-center">
                            <i class="fab fa-telegram mr-2"></i> Telegram
                        </a>
                        <a href="#" class="social-btn yandex-btn text-white py-2 px-4 rounded-lg flex items-center justify-center">
                            <i class="fab fa-yandex mr-2"></i> Яндекс
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Форма регистрации -->
            <div id="register-form" class="form-switch hidden">
                <h1 class="text-2xl font-bold text-gray-800 mb-6">Создайте аккаунт</h1>
                
                <div class="space-y-4">
                    <div>
                        <label for="register-name" class="block text-sm font-medium text-gray-700 mb-1">Имя</label>
                        <input type="text" id="register-name" class="w-full px-4 py-2 rounded-lg border border-gray-300 input-field focus:outline-none focus:border-indigo-500" placeholder="Ваше имя">
                    </div>
                    
                    <div>
                        <label for="register-email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" id="register-email" class="w-full px-4 py-2 rounded-lg border border-gray-300 input-field focus:outline-none focus:border-indigo-500" placeholder="example@mail.com">
                    </div>
                    
                    <div>
                        <label for="register-password" class="block text-sm font-medium text-gray-700 mb-1">Пароль</label>
                        <div class="relative">
                            <input type="password" id="register-password" class="w-full px-4 py-2 rounded-lg border border-gray-300 input-field focus:outline-none focus:border-indigo-500" placeholder="••••••••">
                            <button class="absolute right-3 top-2 text-gray-400 hover:text-gray-600" onclick="togglePassword('register-password')">
                                <i class="far fa-eye"></i>
                            </button>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">Минимум 6 символов</p>
                    </div>
                    
                    <div>
                        <label for="register-confirm-password" class="block text-sm font-medium text-gray-700 mb-1">Подтвердите пароль</label>
                        <div class="relative">
                            <input type="password" id="register-confirm-password" class="w-full px-4 py-2 rounded-lg border border-gray-300 input-field focus:outline-none focus:border-indigo-500" placeholder="••••••••">
                            <button class="absolute right-3 top-2 text-gray-400 hover:text-gray-600" onclick="togglePassword('register-confirm-password')">
                                <i class="far fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center">
                        <input type="checkbox" id="agree-terms" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                        <label for="agree-terms" class="ml-2 block text-sm text-gray-700">
                            Я согласен с <a href="#" class="text-indigo-600 hover:text-indigo-500">условиями использования</a>
                        </label>
                    </div>
                    
                    <button id="register-button" class="w-full bg-indigo-600 text-white py-2 rounded-lg font-medium hover:bg-indigo-700 transition duration-300">
                        Зарегистрироваться
                    </button>
                </div>
                
                <div class="mt-4 text-center text-sm text-gray-600">
                    Уже есть аккаунт? <button class="text-indigo-600 hover:text-indigo-500 toggle-to-login">Войти</button>
                </div>
            </div>

            <!-- Вид профиля (скрыт по умолчанию) -->
            <div id="profile-view" class="hidden p-8 pt-12 bg-white">
                <div class="flex flex-col items-center">
                    <div class="relative group">
                        <div class="w-20 h-20 rounded-full bg-indigo-100 flex items-center justify-center mb-4 overflow-hidden">
                            <img id="profile-avatar" src="" alt="" class="hidden w-full h-full object-cover">
                            <i id="default-avatar-icon" class="fas fa-user text-indigo-500 text-3xl"></i>
                        </div>
                        <label for="avatar-upload" class="absolute bottom-1 right-1 bg-gray-200 rounded-full p-2 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity">
                            <i class="fas fa-camera text-gray-700 text-xs"></i>
                            <input type="file" id="avatar-upload" accept="image/*" class="hidden">
                        </label>
                    </div>
                    
                    <div class="w-full max-w-xs mb-6">
                        <div id="name-view" class="flex justify-center items-center">
                            <h2 id="profile-name" class="text-xl font-bold text-gray-800 mr-2 text-center">Демо Пользователь</h2>
                            <button id="edit-name-btn" class="text-indigo-500 hover:text-indigo-700">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                        <div id="name-edit" class="hidden flex items-center">
                            <input type="text" id="profile-name-input" class="flex-1 px-2 py-1 border rounded">
                            <button id="save-name-btn" class="ml-2 px-2 text-indigo-500 hover:text-indigo-700">
                                <i class="fas fa-check"></i>
                            </button>
                        </div>
                    </div>
                    
                    <p id="profile-email" class="text-gray-600 mb-6">demo@example.com</p>
                    
                    <div class="w-full max-w-xs space-y-3">
                        <button id="logout-button" class="w-full bg-gray-200 text-gray-800 py-2 rounded-lg font-medium hover:bg-gray-300 transition duration-300">
                            Выйти
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Переключение между формами входа и регистрации
        const loginToggle = document.getElementById('login-toggle');
        const registerToggle = document.getElementById('register-toggle');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const toggleToLoginButtons = document.querySelectorAll('.toggle-to-login');
        
        // Инициализация кнопок переключения
        [loginToggle, registerToggle].forEach(button => {
            button.addEventListener('click', () => {
                loginToggle.classList.toggle('active', button === loginToggle);
                registerToggle.classList.toggle('active', button === registerToggle);
                
                loginForm.classList.toggle('hidden', button === registerToggle);
                registerForm.classList.toggle('hidden', button === loginToggle);
            });
        });
        
        // Инициализация кнопок "Войти" на форме регистрации
        toggleToLoginButtons.forEach(button => {
            button.addEventListener('click', () => {
                loginToggle.click();
            });
        });
        
        // Функция для переключения видимости пароля
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const icon = input.nextElementSibling.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
        
        // Демо вход (автоматически заполняет и авторизует)
        document.getElementById('demo-login-button').addEventListener('click', () => {
            document.getElementById('login-email').value = 'demo@example.com';
            document.getElementById('login-password').value = 'demopassword123';
            document.getElementById('login-button').click();
        });

        // Обработка входа
        document.getElementById('login-button').addEventListener('click', () => {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (!email || !password) {
                alert('Пожалуйста, заполните все поля');
                return;
            }
            
            // Демо: показываем профиль
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('register-form').classList.add('hidden');
            document.querySelector('.auth-container').classList.add('pt-8'); // Add padding compensation
            document.querySelector('.flex.rounded-lg.p-1.bg-gray-100.mb-6').classList.add('hidden'); // Hide toggle
            document.getElementById('profile-view').classList.remove('hidden');
            
            // Устанавливаем данные пользователя
            document.getElementById('profile-name').textContent = 'Демо Пользователь';
            document.getElementById('profile-email').textContent = email;
        });
        
        // Обработка регистрации
        document.getElementById('register-button').addEventListener('click', () => {
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const agreeTerms = document.getElementById('agree-terms').checked;
            
            if (!name || !email || !password || !confirmPassword) {
                alert('Пожалуйста, заполните все поля');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Пароли не совпадают');
                return;
            }
            
            if (password.length < 6) {
                alert('Пароль должен содержать минимум 6 символов');
                return;
            }
            
            if (!agreeTerms) {
                alert('Необходимо согласиться с условиями использования');
                return;
            }
            
            // Демо: показываем профиль
            document.getElementById('register-form').classList.add('hidden'); 
            document.getElementById('profile-view').classList.remove('hidden');
            
            // Устанавливаем данные нового пользователя
            document.getElementById('profile-name').textContent = name;
            document.getElementById('profile-email').textContent = email;
        });
        
        // Обработка входа через Telegram
        document.querySelector('.telegram-btn').addEventListener('click', (e) => {
            e.preventDefault();
            alert('Реализация входа через Telegram\nВ реальной системе здесь должно быть перенаправление на OAuth Telegram');
        });
        
        // Обработка входа через Яндекс
        document.querySelector('.yandex-btn').addEventListener('click', (e) => {
            e.preventDefault();
            alert('Реализация входа через Яндекс\nВ реальной системе здесь должно быть перенаправление на OAuth Яндекс');
        });

        // Функционал аватара
        document.getElementById('avatar-upload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                const img = document.getElementById('profile-avatar');
                img.src = event.target.result;
                img.classList.remove('hidden');
                document.getElementById('default-avatar-icon').classList.add('hidden');
            };
            reader.readAsDataURL(file);
        });
        
        // Функционал редактирования имени
        const nameView = document.getElementById('name-view');
        const nameEdit = document.getElementById('name-edit');
        const nameInput = document.getElementById('profile-name-input');
        const profileName = document.getElementById('profile-name');
        
        document.getElementById('edit-name-btn').addEventListener('click', () => {
            nameView.classList.add('hidden');
            nameEdit.classList.remove('hidden');
            nameInput.value = profileName.textContent;
            nameInput.focus();
        });
        
        document.getElementById('save-name-btn').addEventListener('click', () => {
            const newName = nameInput.value.trim();
            if (newName) {
                profileName.textContent = newName;
                nameView.classList.remove('hidden');
                nameEdit.classList.add('hidden');
            }
        });
        
        // Обработка выхода
        document.getElementById('logout-button').addEventListener('click', () => {
            document.getElementById('profile-view').classList.add('hidden');
            document.querySelector('.auth-container').classList.remove('pt-8'); // Remove padding compensation
            document.querySelector('.flex.rounded-lg.p-1.bg-gray-100.mb-6').classList.remove('hidden'); // Show toggle
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('login-toggle').click();
            
            // Сбрасываем аватар и имя
            document.getElementById('profile-avatar').src = '';
            document.getElementById('profile-avatar').classList.add('hidden');
            document.getElementById('default-avatar-icon').classList.remove('hidden');
            
            // Очищаем поля
            document.getElementById('login-email').value = '';
            document.getElementById('login-password').value = '';
            document.getElementById('register-name').value = '';
            document.getElementById('register-email').value = '';
            document.getElementById('register-password').value = '';
            document.getElementById('register-confirm-password').value = '';
            document.getElementById('agree-terms').checked = false;
        });
    </script>
</body>
</html>
